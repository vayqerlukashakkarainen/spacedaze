import{U as Fe}from"./kaplay-D9oRpw-2.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const d of i.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function o(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=o(a);fetch(a.href,i)}})();const qe={toolName:"Blaster",upgrades:[{name:"Level 1",desc:"Add a blaster at the front of the ship as firepower",price:12,sprite:"blaster1",value:1},{name:"Level 2",desc:"Add a second blaster to your ship",price:12,sprite:"blaster1",value:2},{name:"Level 3",desc:"Add a third blaster to your ship",price:12,sprite:"blaster1",value:3}]},Ce={toolName:"Blaster wires",requiredTool:"blaster",upgrades:[{name:"Level 1",desc:"Fire all blasters at the same time",price:12,sprite:"blaster_upg_speed1",value:1}]},Ne={toolName:"Blaster speed",requiredTool:"blaster",upgrades:[{name:"Level 1",desc:"Increase velocity of blaster projectiles",price:12,sprite:"blaster_upg_speed1",value:1.65}]},Re={toolName:"Blaster dmg",requiredTool:"blaster",upgrades:[{name:"Level 1",desc:"Increase damage of the ships primary blasters",price:12,sprite:"blaster_upg_dmg1",value:2}]},ze={toolName:"Followers",upgrades:[{name:"Level 1",desc:"Purchase a follower for your social media account",sprite:"rocket_upg1",price:22,value:1},{name:"Level 2",desc:"Your social media is blowing up",sprite:"rocket_upg1",price:22,value:2},{name:"Level 3",desc:"Wow, you are popular!!",sprite:"rocket_upg1",price:22,value:3},{name:"Level 4",desc:"Alright rockstar...",sprite:"rocket_upg1",price:22,value:10}]},We={toolName:"Followers",requiredTool:"follower",upgrades:[{name:"Level 1",desc:"Increase your followers social media likes",sprite:"rocket_upg1",price:22,value:1},{name:"Level 2",desc:"Too... Many... Likes...",sprite:"rocket_upg1",price:22,value:2}]},Ge={toolName:"Followers",requiredTool:"follower",upgrades:[{name:"Level 1",desc:"Your followers will become quite dangerous",sprite:"rocket_upg1",price:22,value:1}]},Ke={toolName:"Missile barrage",upgrades:[{name:"Level 1",desc:"Install missile pods to the ship",sprite:"rocket_upg1",price:22,value:1}]},Je={toolName:"Increase missiles",requiredTool:"rockets",upgrades:[{name:"Level 1",desc:"Increase missiles to 6",sprite:"rocket_upg1",price:22,value:6},{name:"Level 2",desc:"Increase missiles to 8",sprite:"rocket_upg1",price:22,value:8},{name:"Level 3",desc:"Increase missiles to 10",sprite:"rocket_upg1",price:22,value:10},{name:"Level 4",desc:"Increase missiles to 16, missiles will be taped outside the pod",sprite:"rocket_upg1",price:22,value:16}]},Ye={toolName:"Missile shards",requiredTool:"rockets",upgrades:[{name:"Level 1",desc:"Missiles are loaded with space debree, shooting shards when exploded",sprite:"rocket_upg1",price:22,value:1}]},$e={toolName:"Moar missile shards",requiredTool:"rocketShards",upgrades:[{name:"Level 1",desc:"Squeeze some more debree in those missiles!!",sprite:"rocket_upg1",price:22,value:5},{name:"Level 2",desc:"Squeeze some more debree in those missiles!!",sprite:"rocket_upg1",price:22,value:7},{name:"Level 3",desc:"Squeeze some more debree in those missiles!!",sprite:"rocket_upg1",price:22,value:9}]},Qe={toolName:"Debree magnets",upgrades:[{name:"Level 1",desc:"Upgrade the ships magnetic magnets and increase debree collect distance",sprite:"debree_dist_upg1",price:32,value:1.2},{name:"Level 2",desc:"Upgrade the ships magnetic magnets and increase debree collect distance",sprite:"debree_dist_upg1",price:32,value:1.4},{name:"Level 3",desc:"Upgrade the ships magnetic magnets and increase debree collect distance",sprite:"debree_dist_upg1",price:32,value:1.6},{name:"Level 4",desc:"Upgrade the ships magnetic magnets and increase debree collect distance",sprite:"debree_dist_upg1",price:32,value:1.8},{name:"Level 5",desc:"Upgrade the ships magnetic magnets and increase debree collect distance",sprite:"debree_dist_upg1",price:32,value:2}]},Xe={toolName:"Stronger magnets",upgrades:[{name:"Level 1",desc:"Stronger magnets = faster debree, easy math",sprite:"debree_speed_upg1",price:32,value:1.2},{name:"Level 2",desc:"Stronger magnets = faster debree, easy math",sprite:"debree_speed_upg1",price:32,value:1.4},{name:"Level 3",desc:"Stronger magnets = faster debree, easy math",sprite:"debree_speed_upg1",price:32,value:2}]},Ze={toolName:"Thrusters overclock",upgrades:[{name:"Level 1",desc:"Hold SHIFT to overclock thrusters, increasing speed",sprite:"debree_speed_upg1",price:32,value:1.2},{name:"Level 2",desc:"Increase speed when overclocking thrusters",sprite:"debree_speed_upg1",price:32,value:1.4}]},et={toolName:"Thrusters cooling",requiredTool:"sprint",upgrades:[{name:"Level 1",desc:"Overclocking thrusters gains more speed",sprite:"debree_speed_upg1",price:32,value:1.3},{name:"Level 2",desc:"Overclocking thrusters gains more speed",sprite:"debree_speed_upg1",price:32,value:1.4}]},tt={toolName:"Upgraded thrusters",upgrades:[{name:"Level 1",desc:"Increase ship move speed",sprite:"debree_speed_upg1",price:32,value:1.05},{name:"Level 2",desc:"Increase ship move speed",sprite:"debree_speed_upg1",price:32,value:1.15}]},rt={toolName:"Shiny debree",requiredTool:"debreeDist",upgrades:[{name:"Level 1",desc:"Debree becomes more valueable, who could have thought",sprite:"debree_speed_upg1",price:32,value:2},{name:"Level 2",desc:"Debree becomes almost as valuable as gold",sprite:"debree_speed_upg1",price:32,value:3}]},st={toolName:"Stronger hull",upgrades:[{name:"Level 1",desc:"Upgrade hull and increase health by one",sprite:"debree_speed_upg1",price:32,value:3},{name:"Level 2",desc:"Upgrade hull and increase health by one",sprite:"debree_speed_upg1",price:32,value:4},{name:"Level 3",desc:"Upgrade hull and increase health by one",sprite:"debree_speed_upg1",price:32,value:5},{name:"Level 4",desc:"Upgrade hull and increase health by one",sprite:"debree_speed_upg1",price:32,value:6},{name:"Level 5",desc:"Upgrade hull and increase health by one",sprite:"debree_speed_upg1",price:32,value:7},{name:"Level 6",desc:"Upgrade hull and increase health by one",sprite:"debree_speed_upg1",price:32,value:8},{name:"Level 7",desc:"Upgrade hull and increase health by one",sprite:"debree_speed_upg1",price:32,value:9},{name:"Level 8",desc:"Upgrade hull and increase health by one",sprite:"debree_speed_upg1",price:32,value:10}]},Z={blaster:qe,blasterParallel:Ce,blasterDmg:Re,blasterSpeed:Ne,rockets:Ke,nrOfRockets:Je,rocketShards:Ye,rocketShardsAmount:$e,debreeDist:Qe,debreeSpeed:Xe,debreeValue:rt,sprint:Ze,sprintSpeed:et,movespeed:tt,maxHealth:st,follower:ze,followerBlasterDmg:We,followerMissiles:Ge};let j={blaster:void 0,blasterDmg:void 0,blasterSpeed:void 0,rockets:void 0,debreeDist:void 0,debreeSpeed:void 0,nrOfRockets:void 0,sprint:void 0,movespeed:void 0,debreeValue:void 0,maxHealth:void 0,follower:void 0,followerBlasterDmg:void 0,followerMissiles:void 0,rocketShards:void 0,rocketShardsAmount:void 0,sprintSpeed:void 0,blasterParallel:void 0};function v(t){if(j[t]!==void 0)return Z[t].upgrades[j[t]].value}function ot(t){j[t]=Te(t),Ue("slot1")}function Te(t){return j[t]===void 0?0:j[t]+1}function at(t){j=t}async function it(t){await t.loadRoot("./"),await t.loadSprite("ship","sprites/ship.png"),await t.loadSprite("crate1","sprites/crate1.png"),await t.loadSprite("bullet1","sprites/bullet1.png"),await t.loadSprite("rocket1","sprites/rocket1.png"),await t.loadSprite("asteroid1","sprites/asteroid1.png"),await t.loadSprite("enemy_ship1","sprites/enemy_ship1.png"),await t.loadSprite("bike1","sprites/bike1.png"),await t.loadSprite("particle1","sprites/particle1.png"),await t.loadSprite("particle2","sprites/particle2.png"),await t.loadSprite("particle3","sprites/particle3.png"),await t.loadSprite("particle4","sprites/particle4.png"),await t.loadSprite("spark1","sprites/spark1.png"),await t.loadSprite("debree_part1","sprites/debree_part1.png"),await t.loadSprite("blaster1","sprites/laser_cannon1.png"),await t.loadSprite("rocket_upg1","sprites/rocket_upg1.png"),await t.loadSprite("blaster_upg_speed1","sprites/blaster_upg_speed1.png"),await t.loadSprite("blaster_upg_dmg1","sprites/blaster_upg_dmg1.png"),await t.loadSprite("debree_dist_upg1","sprites/debree_dist_upg1.png"),await t.loadSprite("debree_speed_upg1","sprites/debree_speed_upg1.png"),await t.loadSprite("bg_moon1","sprites/bg/moon1.png"),await t.loadSprite("bg_building1","sprites/bg/building1.png"),await t.loadBitmapFont("unscii","/fonts/unscii_8x8.png",8,8),await t.loadSound("shoot1","sounds/shoot1.wav"),await t.loadSound("fire_rocket1","sounds/rocket_fire1.wav"),await t.loadSound("explosion1","sounds/explosion1.wav"),await t.loadSound("explosion2","sounds/explosion2.wav"),await t.loadSound("explosion3","sounds/explosion3.wav"),await t.loadSound("explosion4","sounds/explosion4.wav"),await t.loadSound("hit1","sounds/hit1.wav"),await t.loadSound("hit2","sounds/hit2.wav"),await t.loadSound("player_hit1","sounds/player_hit1.wav"),await t.loadSound("collect1","sounds/collect1.wav"),await t.loadSound("click1","sounds/click.wav"),await t.loadSound("purchase","sounds/purchase.wav"),await t.loadSound("error","sounds/error.wav"),await t.loadSound("purchase1","sounds/purchase1.wav"),await t.loadMusic("arcadia","songs/arcadia.mp3"),await t.loadSprite("enemy_ship1_left_wing","sprites/ships/enemy1/enemy_ship1_left_wing.png"),await t.loadSprite("enemy_ship1_right_wing","sprites/ships/enemy1/enemy_ship1_right_wing.png"),await t.loadSprite("enemy_ship1_body","sprites/ships/enemy1/enemy_ship1_body.png")}const _e=["explosion1","explosion2","explosion3"];function M(){const t=Math.floor(Math.random()*_e.length);return _e[t]}function nt(t,r){return t+lt(t,r)}function lt(t,r){let o=(r-t)%360;return o>180&&(o-=360),o<-180&&(o+=360),o}function Ue(t){const r={loadout:j,score:q,time:Se};localStorage.setItem(t,JSON.stringify(r))}function dt(t){var r=localStorage.getItem(t);return r?JSON.parse(r):null}const n={maxHealth:2,scorePerPickup:1,blasterDmg:2,blasterDmgMultiplier:1,blasterLvl:void 0,blasterParallel:void 0,rocketsLvl:void 0,nrOfRockets:3,rocketShards:void 0,rocketShardsAmount:3,blasterSpeedMultiplier:1,debreePickupDistance:10,debreeSeekDistance:50,debreeSeekSpeed:80,debreeSeekDistanceMultiplier:1,debreeSeekSpeedMultiplier:1,debreeValueMultiplier:1,rocketImpactDmg:10,rocketSplashDmg:5,rocketDmgMultiplier:1,rocketSplashSize:30,rocketSplashSizeMultiplier:1,rocketSplashDmgFallOverDistance:.7,rocketSplashDmgFallDistanceValue:.6,speed:100,canSprint:void 0,sprintSpeedMultiplier:1,speedMultiplier:1,speedPwrUpMultiplier:1,nrOfFollowers:0,followerBlasterDmg:1,followerBlasterDmgMultiplier:1,followerCanUseMissiles:void 0};function Pe(){n.blasterLvl=v("blaster"),n.blasterParallel=v("blasterParallel"),n.blasterDmgMultiplier=v("blasterDmg")??1,n.blasterSpeedMultiplier=v("blasterSpeed")??1,n.rocketsLvl=v("rockets"),n.nrOfRockets=v("nrOfRockets")??3,n.rocketShards=v("rocketShards"),n.rocketShardsAmount=v("rocketShardsAmount")??3,n.debreeSeekDistanceMultiplier=v("debreeDist")??1,n.debreeSeekSpeedMultiplier=v("debreeSpeed")??1,n.debreeValueMultiplier=v("debreeValue")??1,n.canSprint=v("sprint"),n.sprintSpeedMultiplier=v("sprintSpeed")??1,n.speedMultiplier=v("movespeed")??1,n.maxHealth=v("maxHealth")??2,n.nrOfFollowers=v("follower")??0,n.followerBlasterDmg=v("followerBlasterDmg")??1,n.followerCanUseMissiles=v("followerMissiles")}function W(t,r){return t===void 0?!1:t>=r}let T,w,oe,he,ae;function ct(){T=e.add([e.pos(),e.particles({max:2e3,speed:[2,30],lifeTime:[.2,.6],colors:[e.WHITE],opacities:[.8,.6],angle:[0,360],damping:[2,2],scales:[.4,.2,.1],texture:e.getSprite("particle3").data.tex,quads:[e.getSprite("particle3").data.frames[0]]},{rate:1,direction:0,spread:90,position:e.vec2(0,0)}),"trail"]),w=e.add([e.pos(),e.particles({max:1e3,speed:[10,40],angle:[0,360],lifeTime:[1,1.5],colors:[e.rgb(255,255,255)],opacities:[1,.5],scales:[1.4,1,.4,.1],damping:[0,.5],angularVelocity:[-90,90],texture:e.getSprite("particle1").data.tex,quads:[e.getSprite("particle1").data.frames[0]]},{rate:0,direction:-90,spread:360,position:e.vec2()})]),oe=e.add([e.pos(),e.particles({max:1e3,speed:[200,300],angle:[0,360],lifeTime:[1,1.5],colors:[e.rgb(255,255,255)],opacities:[1,.5],scales:[1.4,1,.4,.1],damping:[0,.5],angularVelocity:[-90,90],texture:e.getSprite("particle1").data.tex,quads:[e.getSprite("particle1").data.frames[0]]},{rate:0,direction:-90,spread:40,position:e.vec2()})]),e.add([e.pos(),e.particles({max:1e3,speed:[100,150],lifeTime:[1,1.5],angle:[0,360],colors:[e.rgb(255,255,255)],opacities:[1,.5],damping:[0,.5],texture:e.getSprite("particle4").data.tex,quads:[e.getSprite("particle4").data.frames[0]]},{rate:0,direction:-90,spread:40,position:e.vec2()})]),e.add([e.pos(),e.particles({max:1e3,speed:[10,40],lifeTime:[1,1.5],colors:[e.rgb(255,255,255)],opacities:[1,.5],scales:[1,.4,.1],acceleration:[e.vec2(0,1),e.vec2(0,2)],angularVelocity:[-90,90],texture:e.getSprite("particle1").data.tex,quads:[e.getSprite("particle1").data.frames[0]]},{rate:0,direction:-90,spread:0,position:e.vec2()})]),e.add([e.pos(),e.particles({max:1e3,speed:[5,40],angle:[0,360],lifeTime:[1,2],colors:[e.rgb(255,255,255)],opacities:[.7,.4],angularVelocity:[-90,90],scales:[1,.8,0],texture:e.getSprite("debree_part1").data.tex,quads:[e.getSprite("debree_part1").data.frames[0]]},{rate:0,direction:-90,spread:360,position:e.vec2()})]),ae=e.add([e.pos(),e.particles({max:1e3,speed:[60,80],angle:[0,360],lifeTime:[1,2],colors:[e.rgb(255,255,255)],angularVelocity:[-90,90],scales:[1,.8,.2,0],texture:e.getSprite("debree_part1").data.tex,quads:[e.getSprite("debree_part1").data.frames[0]]},{rate:0,direction:-90,spread:55,position:e.vec2()})]),he=e.add([e.pos(),e.particles({max:1e3,speed:[30,80],angle:[0,360],lifeTime:[.5,1.2],colors:[e.rgb(255,255,255)],opacities:[.8,.5],scales:[.4,2,1.2,.4,.1],damping:[1,2],texture:e.getSprite("particle3").data.tex,quads:[e.getSprite("particle3").data.frames[0]]},{rate:0,direction:-90,spread:360,position:e.vec2()})])}let b=null,H=-1,x=-1,V=0;function pt(t){b=t,H=0,x=-1}function ut(){if(!b)return!1;if(V+=e.dt()*1e3,b.levelLengthSeconds<V/1e3)return!0;if(H<b.waves.length&&b.waves[H].timeStamp<V&&x!=H&&(x=H,H++,b.waves[x].begin&&b.waves[x].begin(V)),x>0&&x<b.waves.length){const t=(b.waves[x].duration??0)+b.waves[x].timeStamp;if(V<t)return b.waves[x].upd(V-b.waves[x].timeStamp),b.lvlUpd(),!1}return!1}function De(){return b!=null}function Me(){b&&(gt(b),b=null,V=0)}function gt(t){H=-1,x=-1,t.reset()}const l={friendly:"friendly",enemy:"enemy",gameLoopUi:"game_loop_ui",blaster:"blaster",rocket:"rocket",debree:"debree",unit:"unit",part:"part",levelBg:"level_bg"};let Q=[],ye=null;const mt=10,K=80;function ht(t){for(let r=0;r<t;r++){const o=mt*(r+1),s=e.add([e.pos(10,e.height()-o),e.rect(10,6),e.color(e.WHITE),e.opacity(1),l.gameLoopUi]);Q.push(s)}e.add([e.pos(22,e.height()-4-K),e.rect(4,K),e.color(e.WHITE),e.opacity(.2),l.gameLoopUi]),ye=e.add([e.pos(22,e.height()-4-K),e.rect(4,K),e.color(e.WHITE),l.gameLoopUi])}function ft(t){const r=e.clamp(t,0,Q.length-1);for(let o=Q.length-1;o>r;o--)Q[o].opacity=.2}function vt(t,r){ye.height=K*(t/r)}function bt(){e.destroyAll(l.gameLoopUi),Q=[],ye=null}function R(t,r,o,s,a,i){const d=e.add([e.pos(t),e.move(r,Wt*a),e.area(),e.rotate(o),e.offscreen({destroy:!0}),e.anchor("center"),e.sprite("bullet1"),{dmg:s},...i]);d.onDestroy(()=>{const c=P.findIndex(m=>m.id==d.id);P.splice(c,1)}),e.play("shoot1",{volume:.6}),P.push(d)}function z(t){t.animate("opacity",[0,1,0,1],{duration:.14,loops:1})}function le(t,r,o,s,a){const i=r.sub(o).unit(),d=Math.atan2(i.y,i.x),c=e.rad2deg(d)+a,m=nt(t,c);return{dir:i,lerp:e.lerp(t,m,s)}}function de(t,r,o){const s=e.deg2rad(r+90),a=Math.cos(s),i=Math.sin(s);t.move(a*o*-1,i*o*-1),t.angle=r,t.scale=e.vec2(1,Math.abs(i))}const yt=.5,xe=12,St=400;function Ae(t,r,o,s,a,i,d,c,m,y,_){const p=e.add([e.pos(t),e.area(),e.rotate(o),e.offscreen({destroy:!0}),e.anchor("center"),e.scale(1),e.sprite("rocket1"),{impactDmg:s,splashDmg:a,splashSize:i,splashDmgFallof:d,splashDmgFallofDist:c,lifetime:0,speedMltp:m,dir:r,targetUnit:null,canSeek:_},...y]);e.play("fire_rocket1",{volume:.4}),p.onUpdate(()=>{p.lifetime+=e.dt();const h=e.clamp(Gt*p.speedMltp*(.3+p.lifetime),0,St),f=e.Vec2.fromAngle(p.angle-90);if(p.targetUnit){const{lerp:E}=le(p.angle,p.pos,p.targetUnit.pos,.04,-90);de(p,E,h)}else p.move(f.x*h,f.y*h);const B=e.vec2(p.pos.x-xe*f.x,p.pos.y-xe*f.y);T.emitter.position=B,T.emitter.direction=p.angle,T.emit(1),p.canSeek&&p.lifetime>yt&&p.targetUnit==null&&Oe(p.pos,200,"enemy",E=>{var ce;p.targetUnit=E,(ce=p.targetUnit)==null||ce.onDestroy(()=>{p.targetUnit=null})})}),p.onDestroy(()=>{const h=P.findIndex(f=>f.id==p.id);if(P.splice(h,1),n.rocketShards!==void 0){const f=n.rocketShardsAmount;for(let B=0;B<f;B++){const E=360*(B/f);R(p.pos,e.Vec2.fromAngle(E),E+90,1,1,[l.friendly,l.blaster])}}}),P.push(p)}let C=0,fe=1,G=0;const pe=6;function wt(){const t=e.add([e.pos(e.center()),e.sprite("ship"),e.rotate(0),e.scale(),e.health(n.maxHealth),e.area(),e.anchor("center"),e.animate(),l.friendly]);return z(t),W(n.blasterLvl,1)&&(t.add([e.anchor("center"),e.pos(10,0)]),C++),W(n.blasterLvl,2)&&(t.add([e.anchor("center"),e.pos(-10,0)]),C++),W(n.blasterLvl,3)&&(t.add([e.anchor("center"),e.pos(0,-6)]),C++),t.onDeath(()=>{e.destroy(t),w.emitter.position=t.pos,w.emit(20),e.play("explosion1",{volume:1}),Vt()}),t.onUpdate(()=>{G<pe&&(G+=e.dt(),vt(G,pe)),re(t.pos,12,l.enemy,m=>{e.destroy(m),m.tags.includes(l.blaster)?t.hurt(m.dmg):m.tags.includes(l.rocket)&&(t.hurt(m.impactDmg),te(m.pos,m.splashSize,m.splashDmg,m.splashDmgFallof,m.splashDmgFallofDist),e.play(M(),{volume:.6}),e.shake(3))});const r=t.pos.dist(e.mousePos())-12,{dir:o,lerp:s}=le(t.angle,t.pos,e.mousePos(),.05,-90),a=n.speed*n.speedMultiplier*n.speedPwrUpMultiplier,i=e.clamp(r*4,0,a);t.angle=s;const d=e.Vec2.fromAngle(t.angle+90),c=e.vec2(t.pos.x+12*d.x,t.pos.y+12*d.y);i>4&&(T.emitter.position=c,T.emitter.direction=e.Vec2.toAngle(o),T.emit(1)),de(t,s,i)}),t.onHurt(()=>{e.play("hit2",{volume:.4}),t.animation.seek(0),e.shake(20),e.flash(e.RED,.4),ft(t.hp())}),t.onMousePress("left",()=>{if(W(n.blasterLvl,1)){if(W(n.blasterParallel,1)){for(let o=0;o<C;o++){const s=t.children[o];R(s.worldPos(),e.Vec2.fromAngle(t.angle-90),t.angle,n.blasterDmg*n.blasterDmgMultiplier,n.blasterSpeedMultiplier,[l.friendly,l.blaster])}return}const r=t.children[fe%C];R(r.worldPos(),e.Vec2.fromAngle(t.angle-90),t.angle,n.blasterDmg*n.blasterDmgMultiplier,n.blasterSpeedMultiplier,[l.friendly,l.blaster]),fe++}}),t.onMousePress("right",()=>{n.rocketsLvl!==void 0&&(G<pe||(G=0,e.loop(.1,()=>{Ae(t.pos,e.Vec2.fromAngle(t.angle-90),t.angle,n.rocketImpactDmg*n.rocketDmgMultiplier,n.rocketSplashDmg*n.rocketDmgMultiplier,n.rocketSplashSize*n.rocketSplashSizeMultiplier,n.rocketSplashDmgFallDistanceValue,n.rocketSplashDmgFallOverDistance,1,[l.friendly,l.rocket],!0)},n.nrOfRockets)))}),t.onKeyDown("shift",()=>{n.canSprint!==void 0&&(n.speedPwrUpMultiplier=1.8*n.sprintSpeedMultiplier)}),t.onKeyRelease("shift",()=>{n.speedPwrUpMultiplier=1}),t}function _t(){fe=0,C=0}function ee(t,r){for(let o=0;o<r;o++){const s=e.add([e.pos(t),e.sprite("particle2"),e.animate({relative:!0}),e.rotate(e.rand(360)),e.opacity(1),{dir:e.rand(e.vec2(-1,-1),e.vec2(1,1)),speed:e.rand(40,60),lifeSpan:0},l.debree]);s.onUpdate(()=>{s.lifeSpan>s.speed||(s.move(s.dir.x*(s.speed-s.lifeSpan),s.dir.y*(s.speed-s.lifeSpan)),s.lifeSpan+=e.dt()*45)}),s.animate("opacity",[1,.5],{duration:1}),X.push(s)}}function ue(t,r,o,s){const a=12*s,i=e.add([e.pos(t),e.sprite("enemy_ship1"),e.rotate(0),e.anchor("center"),e.health(o),e.animate(),e.scale(s),e.offscreen({destroy:!0}),{speed:e.rand(100,130),hb:a,targetPos:e.rand(e.vec2(e.width(),e.height()))},e.state("retreat",["attack","retreat"]),l.enemy,l.unit]);i.onStateEnter("retreat",async()=>{const d=e.rand(e.vec2(e.width(),e.height()));i.targetPos=d,await e.wait(1),i.enterState("attack")}),i.onStateEnter("attack",async()=>{await e.wait(3),i.enterState("retreat")}),i.onStateUpdate("attack",()=>{const d=U.pos;i.targetPos=d;const c=i.pos.dist(i.targetPos);c<50?i.enterState("retreat"):c>50&&c<200&&Math.floor(e.rand(0,200))==1&&R(i.pos,e.Vec2.fromAngle(i.angle-90),i.angle,2,1,[l.enemy,l.blaster])}),z(i),i.onUpdate(()=>{const{lerp:d}=le(i.angle,i.pos,i.targetPos,.01,-90);de(i,d,i.speed),re(i.pos,i.hb,l.friendly,c=>{e.destroy(c),c.tags.includes(l.blaster)?i.hurt(c.dmg):c.tags.includes(l.rocket)&&(i.hurt(c.impactDmg),te(c.pos,c.splashSize,c.splashDmg,c.splashDmgFallof,c.splashDmgFallofDist),e.play(M(),{volume:.6}),e.shake(3))})}),i.onDeath(()=>{w.emitter.position=i.pos,w.emit(20),ee(i.pos,r),e.play(M(),{volume:.6}),e.destroy(i)}),i.onHurt(()=>{e.play("hit1",{volume:.6}),i.animation.seek(0)})}function J(t){const r=e.rand(1,2),o=12*r,s=e.add([e.pos(t.pos),e.sprite("asteroid1"),e.rotate(0),e.anchor("center"),e.scale(e.rand(1,2)),e.health(t.hp),e.animate(),e.offscreen({destroy:!0}),{vel:t.dir,rotVel:e.rand(-4,4),speed:t.speed,initScale:r,hb:o},l.enemy,l.unit]);z(s),s.onUpdate(()=>{s.move(s.vel.scale(s.speed)),s.angle+=s.rotVel,re(s.pos,s.hb,l.friendly,a=>{e.destroy(a),a.tags.includes(l.blaster)?(s.hurt(a.dmg),ee(s.pos,1)):a.tags.includes(l.rocket)&&(s.hurt(a.impactDmg),te(a.pos,a.splashSize,a.splashDmg,a.splashDmgFallof,a.splashDmgFallofDist),e.play(M(),{volume:.6}),e.shake(3),ae.emitter.position=s.pos,ae.emitter.direction=a.angle-90,ae.emit(6))}),U.pos.dist(s.pos)<s.hb&&(U.hurt(1),s.hurt(t.hp))}),s.onDeath(()=>{if(w.emitter.position=s.pos,w.emit(20),ee(s.pos,t.scoreOnKill),e.play(M(),{volume:.6}),e.destroy(s),t.splitOnDeath)for(let a=0;a<t.splitOnDeath;a++)J({pos:s.pos,dir:e.rand(e.vec2(-1,-1),e.vec2(1,1)),scoreOnKill:t.scoreOnKill/2,hp:t.hp/2,speed:t.speed*2,splitOnDeath:0})}),s.onHurt(()=>{e.play("hit1",{volume:.6}),s.animation.seek(0)})}function Dt(t,r,o,s,a){const d=e.add([e.pos(r),e.sprite(a),e.rotate(o.angle()-90),e.anchor("center"),e.health(s),e.animate(),e.offscreen({destroy:!0}),{vel:o,speed:e.rand(300,340),hb:12},l.enemy,l.unit]);z(d),d.onUpdate(()=>{d.move(d.vel.scale(d.speed)),re(d.pos,d.hb,l.friendly,c=>{e.destroy(c),c.tags.includes(l.blaster)?(d.hurt(c.dmg),ee(d.pos,1)):c.tags.includes(l.rocket)&&(d.hurt(c.impactDmg),te(c.pos,c.splashSize,c.splashDmg,c.splashDmgFallof,c.splashDmgFallofDist),e.play(M(),{volume:.6}),e.shake(3))}),U.pos.dist(d.pos)<d.hb&&(U.hurt(1),d.hurt(s))}),d.onDeath(()=>{oe.emitter.position=d.pos,oe.emitter.direction=d.angle+90,oe.emit(20),e.play(M(),{volume:.6}),e.destroy(d),t.killed+=1}),d.onHurt(()=>{e.play("hit1",{volume:.6}),d.animation.seek(0)})}function xt(t,r,o){const s=e.add([e.animate(),{startPos:t,endPos:r,opacity:.15,killed:0},l.enemy]);s.onUpdate(()=>{if(Math.floor(e.rand(0,100-o))==1){const a=Lt(6);Dt(s,s.startPos.add(a),s.endPos.add(a).sub(s.startPos).unit(),4,kt())}s.opacity=e.wave(.1,.2,e.time()),s.killed>=5&&s.destroy()}),s.onDraw(()=>{e.drawLines({pts:[s.startPos,s.endPos],width:40,opacity:s.opacity})})}const ke=["enemy_ship1","bike1"];function kt(){return ke[Math.floor(e.rand(0,ke.length))]}function Lt(t){return e.rand(e.vec2(-6,-6),e.vec2(t,t))}function Tt(t){const r=[],o=t.parts.find(s=>s.isBody);for(let s=0;s<t.parts.length;s++){const a=t.parts[s];z(a.obj),a.obj.onHurt(()=>{e.play("hit1",{volume:.6}),t.parts[s].obj.animation.seek(0)}),a.obj.onDeath(()=>{const i=a.isBody?a.obj.pos:o.obj.pos.sub(a.obj.pos);if(w.emitter.position=i,w.emit(20),ee(i,a.scoreOnDestroy),e.play(M(),{volume:.6}),a.isBody){delete Y[a.obj.id],e.destroy(a.obj);return}a.obj.hidden=!0,a.obj.paused=!0,Ut(i,a.obj.sprite,e.rand(40,80)),o.obj.jitter(20)}),r.push({obj:a.obj,localPos:a.isBody?e.vec2(0,0):a.obj.pos,hitbox:a.hitbox,isBody:a.isBody})}return r}function Ut(t,r,o){const s=e.add([e.pos(t),e.sprite(r),e.lifespan(2,{fade:.2}),e.offscreen({destroy:!0}),e.opacity(1),e.scale(1),e.rotate(e.rand(0,360)),e.move(e.rand(e.vec2(-1,-1),e.vec2(1,1)),o),{spin:e.rand(2,8)}]);s.onUpdate(()=>{const a=e.wave(-1,1,e.time()*s.spin);s.scale=e.vec2(a,a)})}function ge(){return{jitterValue:0,id:"jitter",require:["pos"],update(){if(this.jitterValue>0){const r=this.jitterValue*8;var t=e.rand(e.vec2(-r,-r),e.vec2(r,r));this.move(t),this.jitterValue-=e.dt()*100}},jitter(t){this.jitterValue=t}}}const Pt=[6,2],Y={};function me(t,r,o,s,a,i){const d=16*a,c=e.add([e.pos(t),e.sprite("enemy_ship1_body"),e.rotate(r.angle()+90),e.anchor("center"),e.health(s),e.animate(),e.scale(a),ge(),e.offscreen({destroy:!0}),{vel:r,speed:i,hb:d},l.enemy,l.unit]),m=c.add([e.pos(e.vec2(-6,-2)),e.sprite("enemy_ship1_left_wing"),e.anchor("center"),e.health(Math.floor(s/2)),e.animate(),ge(),l.part]),y=c.add([e.pos(e.vec2(Pt[0],-2)),e.sprite("enemy_ship1_right_wing"),e.anchor("center"),e.health(Math.floor(s/2)),e.animate(),ge(),l.part]);Y[c.id]=Tt({parts:[{obj:c,hitbox:8,isBody:!0,scoreOnDestroy:o},{obj:m,hitbox:8,isBody:!1,scoreOnDestroy:2},{obj:y,hitbox:8,isBody:!1,scoreOnDestroy:2}]}),c.onUpdate(()=>{c.move(c.vel.scale(c.speed)),Ht(c.pos,c.hb,l.friendly,Y[c.id],(h,f)=>{e.destroy(h),h.tags.includes(l.blaster)?Y[c.id][f].obj.hurt(h.dmg):h.tags.includes(l.rocket)&&(Y[c.id][f].obj.hurt(h.impactDmg),te(h.pos,h.splashSize,h.splashDmg,h.splashDmgFallof,h.splashDmgFallofDist),e.play(M(),{volume:.6}),e.shake(3))}),Math.floor(e.rand(0,500))==10&&R(c.pos,e.Vec2.fromAngle(c.angle-90),c.angle,2,1,[l.enemy,l.blaster]);const _=e.Vec2.fromAngle(c.angle-90),p=e.vec2(c.pos.x-12*_.x,c.pos.y-12*_.y);T.emitter.position=p,T.emitter.direction=e.Vec2.toAngle(_),T.emit(1)})}function Mt(t,r,o){const s=document.getElementById("song"),a=document.getElementById("song_title"),i=document.getElementById("song_author"),d=document.getElementById("song_cover");i.textContent=r,a.textContent=t,d.setAttribute("src",o),s==null||s.classList.add("show")}function At(){const t=document.getElementById("song");t==null||t.classList.remove("show")}let k={},g=0,D=0,A=0,Le;const L={music:"arcadia",songTitle:"Arcadia",songAuthor:"Dunderpatrullen",songAlbumCover:"/covers/arcadia_cover.jpg",bpm:.44,title:"",introduceSound:"",levelLengthSeconds:190,reset:()=>{k={},Le.stop(),At()},lvlUpd:()=>{},waves:[{timeStamp:0,begin:()=>{Le=e.play(L.music,{volume:.9})},upd:()=>{}},{timeStamp:3500,begin:()=>{Mt(L.songTitle,L.songAuthor,L.songAlbumCover)},upd:()=>{}},{timeStamp:4500,begin:t=>{var r=e.add([e.pos(e.center()),e.anchor("center"),e.animate(),e.text("...INIT SPACEJUMP...",{font:"",size:42}),l.gameLoopUi]);r.animate("opacity",[1,0],{loops:5,duration:.7}),k.txt=r},upd:()=>{}},{timeStamp:4550,duration:3550,begin:()=>{k.lines=[]},upd:t=>{var r=e.rand(e.vec2(e.width(),e.height())),o=e.add([e.pos(r),e.rect(2,4*(t/100)),e.color(e.WHITE),"dust"]);k.lines.push(o);for(let s=0;s<k.lines.length;s++)k.lines[s].move(0,-10*(t/50));t>2e3&&e.shake(.01*(t/100))}},{timeStamp:8120,begin:()=>{e.destroyAll("dust"),e.flash(e.WHITE,1),e.destroy(k.txt),delete k.lines;const t=40;for(let o=0;o<t;o++){var r=e.rand(e.vec2(e.width(),e.height()));U.pos.dist(r)<200||J({pos:r,dir:e.DOWN,scoreOnKill:1,hp:3,speed:e.rand(20,40),splitOnDeath:2})}e.add([e.pos(100),e.color(e.rgb(50,50,50)),e.sprite("bg_moon1"),e.scale(2),e.layer(N.bg),l.levelBg]),e.add([e.pos(100,400),e.color(e.rgb(50,50,50)),e.sprite("bg_building1"),e.scale(2),e.layer(N.bg),l.levelBg])},upd:t=>{}},{timeStamp:16e3,begin:()=>{var t=e.add([e.pos(e.center()),e.anchor("center"),e.animate(),e.text("!!THREAT DETECTED!!",{font:"",size:42}),l.gameLoopUi]);t.animate("opacity",[1,0],{loops:10,duration:L.bpm}),k.txt=t},upd:t=>{}},{timeStamp:21e3,begin:()=>{e.destroy(k.txt);const t=6;for(let r=0;r<t;r++){const o=O(.25*(r/t));me(o,e.DOWN,3,5,1,e.rand(40,60))}},upd:t=>{}},{timeStamp:18790,begin:()=>{e.flash(e.WHITE,L.bpm);const t=12;for(let r=0;r<t;r++){const o=O(1*(r/t));me(o,e.Vec2.fromAngle(o.angleBetween(e.center())),3,5,1,e.rand(40,60))}},upd:t=>{}},{timeStamp:22790,begin:()=>{e.flash(e.WHITE,L.bpm);const t=12;for(let r=0;r<t;r++){const o=O(1*(r/t));me(o,e.Vec2.fromAngle(o.angleBetween(e.center())),3,5,1,e.rand(40,60))}},upd:t=>{}},{timeStamp:36744,duration:1e3,begin:()=>{e.shake(10)},upd:t=>{if(g+=e.dt(),g>=.05){const r=e.rand(1);ue(O(r),2,2,1),g=0}}},{timeStamp:43824,duration:1500,begin:()=>{g=0,D=0,A=30},upd:t=>{if(g+=e.dt(),g>=.03&&D<A){const r=.25+.25*(D/A);J({pos:O(r),dir:e.LEFT,scoreOnKill:1,hp:3,speed:40,splitOnDeath:2}),D++,g=0}}},{timeStamp:45600,duration:1500,begin:()=>{g=0,D=0,A=30},upd:t=>{if(g+=e.dt(),g>=.03&&D<A){const r=.75+.25*(D/A);J({pos:O(r),dir:e.RIGHT,scoreOnKill:1,hp:3,speed:40,splitOnDeath:2}),D++,g=0}}},{timeStamp:47e3,duration:5e3,begin:()=>{g=0,D=0,A=30},upd:t=>{if(g+=e.dt(),g>=.03&&D<A){for(let r=0;r<2;r++){const o=.5*r+.25*(D/A);J({pos:O(o),dir:r==0?e.DOWN:e.UP,scoreOnKill:1,hp:3,speed:40,splitOnDeath:2})}D++,g=0}}},{timeStamp:66e3,duration:14e3,begin:()=>{g=0},upd:t=>{if(g+=e.dt(),g>=L.bpm*2){const r=e.rand(1);ue(O(r),2,2,1),g=0}}},{timeStamp:79300,begin:()=>{g=0;for(let t=0;t<2;t++){const r=200+300*t;xt(e.vec2(0,r),e.vec2(e.width(),r),10)}},upd:t=>{if(g+=e.dt(),g>=L.bpm){const r=e.rand(1);ue(O(r),2,2,1),g=0}}}]};function Ot(){return{lockedTarget:null,id:"target",require:["pos"],pickTarget(t,r,o){return this.lockedTarget?!0:Oe(t,r,o,s=>{this.lockedTarget=s,this.lockedTarget.onDestroy(()=>{this.lockedTarget=null})})},hasTarget(){return this.lockedTarget},targetAngle(){return this.lockedTarget?this.lockedTarget.pos.angle(this.pos):this.angle}}}function Bt(t){const o=e.add([e.pos(t.pos),e.sprite("asteroid1"),e.rotate(0),e.anchor("center"),e.scale(.4),e.health(t.hp),Ot(),e.animate(),e.offscreen({destroy:!0}),{speed:t.speed,hb:12,dmg:t.blasterDmg,missiles:t.canUseMissiles},l.friendly,l.unit]);z(o),o.onUpdate(()=>{const{lerp:s}=le(o.angle,o.pos,t.follow.pos,.015,-90);de(o,s,o.speed),re(o.pos,o.hb,l.enemy,a=>{e.destroy(a),a.tags.includes(l.blaster)&&o.hurt(a.dmg)}),o.missiles&&o.hasTarget()&&Math.floor(e.rand(0,300))==1&&Ae(o.pos,e.Vec2.fromAngle(o.angle-90),o.angle,n.rocketImpactDmg*n.rocketDmgMultiplier,n.rocketSplashDmg*n.rocketDmgMultiplier,n.rocketSplashSize*n.rocketSplashSizeMultiplier,n.rocketSplashDmgFallDistanceValue,n.rocketSplashDmgFallOverDistance,.8,[l.friendly,l.rocket],!0),Math.floor(e.rand(0,110))==1&&o.pickTarget(o.pos,400,l.enemy)&&R(o.pos,e.Vec2.fromAngle(o.targetAngle()),o.targetAngle()+90,o.dmg,2,[l.friendly,l.blaster])}),o.onDeath(()=>{w.emitter.position=o.pos,w.emit(20),e.play(M(),{volume:.6}),e.destroy(o)}),o.onHurt(()=>{e.play("hit1",{volume:.6}),o.animation.seek(0)})}const Et=1;let U,ie=0,X=[];const P=[];function It(){U=wt(),ht(n.maxHealth)}function jt(){const t=e.dt();if(ie+=t,ie>=Et&&!De()){pt(L);for(let r=0;r<n.nrOfFollowers;r++)Bt({follow:U,hp:6,pos:e.vec2(e.rand(e.width()),0),speed:e.rand(80,110),blasterDmg:n.followerBlasterDmg*n.followerBlasterDmgMultiplier,canUseMissiles:n.followerCanUseMissiles!==void 0})}De()&&ut()&&(ie=0,Me());for(let r=0;r<X.length;r++){const o=X[r],s=o.pos.dist(U.pos);s<n.debreeSeekDistance*n.debreeSeekDistanceMultiplier&&(o.moveTo(U.pos,n.debreeSeekSpeed*n.debreeSeekSpeedMultiplier),s<n.debreePickupDistance&&(e.destroy(o),X.splice(r,1),e.play("collect1",{volume:.6}),He(n.scorePerPickup),r--))}}function Vt(){_t(),ie=0,X=[],Me(),e.destroyAll(l.enemy),e.destroyAll(l.blaster),e.destroyAll(l.rocket),e.destroyAll(l.enemy),e.destroyAll(l.levelBg),e.destroyAll(l.unit),e.destroyAll(l.debree),bt(),we(F.LevelUp)}function te(t,r,o,s,a){const i=e.query({include:[l.enemy,l.unit],includeOp:"and"});he.emitter.position=t,he.emit(14);for(let d=0;d<i.length;d++)i[d].pos.dist(t)<r&&i[d].hurt(o)}function re(t,r,o,s){for(let a=0;a<P.length;a++){const i=P[a];if(i.pos.dist(t)<r){if(!i.tags.includes(o))continue;s(i)}}}function Ht(t,r,o,s,a){for(let i=0;i<P.length;i++){const d=P[i];if(d.pos.dist(t)<r){if(!d.tags.includes(o))continue;for(let c=0;c<s.length;c++)if(!s[c].obj.hidden&&d.pos.dist(t.sub(s[c].localPos))<s[c].hitbox){a(d,c);return}}}}function Oe(t,r,o,s){const a=e.query({include:[o,l.unit],includeOp:"and"});for(let i=0;i<a.length;i++){const d=a[i];if(d.pos.dist(t)<r)return s(d),!0}return!1}const $="ui_grid";let I,u={group:void 0,title:void 0,header:void 0,desc:void 0,icon:void 0},ve={},Be,Ee;function Ft(){const t=e.center(),r=be(e.vec2(t.x,40),"ui");r.add([e.text("UPGRADE",{size:22,font:"unscii"}),e.anchor("center")]),Be=zt(r,12,Ve(q),e.vec2(0,50)),Ie(t),u.group=be(e.vec2(t.x+t.x/2-100,t.y-t.y/2-40),"ui"),u.group.hidden=!0,Nt(),Rt("START GAME",e.vec2(t.x,t.y*2-60),()=>{qt(),we(F.Playing)})}function qt(){e.destroyAll("ui"),e.destroyAll($)}function Ie(t){e.destroyAll($);const r=be(e.vec2(60,t.y),$);var o=Z,s=Object.entries(o).filter(([y,_])=>_.requiredTool?j[_.requiredTool]!==void 0:!0).map(([y,_])=>y);const a=4;let i=-1;const d=42,c=8,m=16;for(let y=0;y<s.length;y++){const _=Z[s[y]],p=Te(s[y]);y%a==0&&i++;const h=y-a*i,f=r.add([e.pos(e.vec2((d+c)*h,(d+c)*i)),e.rect(d,d),e.area(),e.color(0,0,0),e.anchor("center"),e.outline(1,new e.Color(255,255,255)),$]),B=f.add([e.rect(d+4,d+4),e.pos(-2,-2),e.color(0,0,0),e.opacity(.2),e.anchor("center"),e.outline(2,new e.Color(255,255,255)),$]);B.hidden=!0,ve[s[y]]=B,p>0&&f.add([e.pos(m,-21),e.rect(m,m),e.anchor("center"),e.color(255,255,255)]).add([e.text(`${p}`,{size:14,font:"unscii"}),e.pos(0,2),e.anchor("center"),e.color(0,0,0)]);const E=e.clamp(p,0,_.upgrades.length-1);f.add([e.sprite(_.upgrades[E].sprite,{height:24,width:24}),e.anchor("center")]),f.onClick(()=>Ct(s[y],p,f.worldPos()))}}function Ct(t,r,o){I&&(ve[I.key].hidden=!0),ve[t].hidden=!1,je(t,r),e.play("click1",{volume:1}),Ee=o}function Nt(){u.header=u.group.add([e.text("LEVEL 1",{size:10,font:"unscii"}),e.anchor("top"),e.pos(200/2,0)]),u.title=u.group.add([e.text("BLASTER",{size:14,font:"unscii"}),e.anchor("top"),e.pos(200/2,22)]);const o=u.group.add([e.pos(0,80),e.rect(200,300),e.color(0,0,0),e.outline(2,new e.Color(255,255,255))]),s=o.add([e.rect(200/2,60),e.color(0,0,0),e.anchor("center"),e.pos(200/2,10),e.outline(2,new e.Color(255,255,255))]);u.icon=s.add([e.sprite("ship",{height:32,width:32}),e.anchor("center")]),u.desc=o.add([e.pos(0,80),e.text("EQUIPE YOUR SHIP WITH A LASER BLASTER, LEFT MOUSE TO FIRE",{size:12,font:"unscii",width:200,align:"center",lineSpacing:12})]),u.purchaseBtn=u.group.add([e.rect(240,50),e.area(),e.opacity(1),e.anchor("center"),e.pos(200/2,340)]),u.purchaseBtnText=u.purchaseBtn.add([e.text("PURCHASE 12P",{size:16,font:"unscii"}),e.color(0,0,0),e.anchor("center")]),u.purchaseBtn.onClick(()=>{var i;if(u.group.hidden||(i=u.purchaseBtn)!=null&&i.hidden)return;const a=Z[I.key].upgrades[I.index];if(q<a.price){e.play("error",{volume:.4});return}He(-a.price),ot(I.key),Ie(e.center()),je(I.key,I.index+1),w.emitter.position=Ee,w.emit(20),Pe(),e.play("purchase1",{volume:.8}),Be.text=Ve(q)})}function je(t,r){const o=Z[t],s=e.clamp(r,0,o.upgrades.length-1);u.group.hidden=!1;const a=o.upgrades[s];if(u.title.text=o.toolName.toUpperCase(),u.desc.text=a.desc.toUpperCase(),u.header.text=a.name.toUpperCase(),u.icon.sprite=a.sprite,I={key:t,index:s},r!=s){u.purchaseBtn.hidden=!0;return}if(u.purchaseBtnText.text=`PURCHASE ${a.price}P`,u.purchaseBtn.hidden=!1,q<a.price){u.purchaseBtn.opacity=.3;return}u.purchaseBtn.opacity=1}function Rt(t,r,o){const s=e.add([e.pos(r),e.rect(300,50),e.area(),e.color(0,0,0),e.anchor("center"),"ui"]);return s.add([e.text(t,{size:16,font:"unscii"}),e.anchor("center")]),s.onClick(o),s}function zt(t,r,o,s){return t.add([e.rect(80,40),e.pos(s),e.anchor("center"),e.outline(2,new e.Color(255,255,255)),e.color(0,0,0)]).add([e.text(o,{size:r,font:"unscii"}),e.anchor("center")])}function be(t,r){return e.add([e.pos(t),r])}function Ve(t){return`${t}P`}const N={bg:"bg",game:"game",ui:"ui"},F={Playing:1,LevelUp:2},se=-22;let q=40;const Wt=320,Gt=280;let Se=0;const S=[];let ne=F.Playing;const e=Fe({background:"#000000",global:!1,scale:1.3,width:600,height:600});it(e).then(()=>{ct(),Kt(),e.setLayers([N.bg,N.game,N.ui],N.game),Jt(),we(F.LevelUp),e.onUpdate(()=>{ne==F.Playing&&(Se+=e.dt(),jt())})});function we(t){ne=t,ne==F.Playing?It():ne==F.LevelUp&&(Ue("slot1"),Ft())}function He(t){q+=t}function Kt(){var t=dt("slot1");t&&(at(t.loadout),q=t.score,Se=t.time,Pe())}function Jt(){const t=e.center();S.push(e.vec2(22,22)),S.push(e.vec2(t.x*2+se,22)),S.push(e.vec2(t.x*2+se,t.y*2+se)),S.push(e.vec2(22,t.y*2+se))}function O(t){const r=Math.floor(S.length*t),o=1/S.length*r,s=(t-o)*S.length,a=(r+1>=S.length?S[0]:S[r+1]).sub(S[r]),i=e.clamp(r,0,S.length-1);return S[i].add(a.scale(s))}
//# sourceMappingURL=index-BxqX04_L.js.map
